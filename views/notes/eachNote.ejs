<style>
  body {
    background: linear-gradient(to right, #f8f9fa, #eef1f7);
  }

  .note-detail {
    max-width: 820px;
    margin: 60px auto;
    padding: 40px;
    background: rgba(255, 255, 255, 0.7);
    border-radius: 20px;
    backdrop-filter: blur(10px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
    font-family: 'Segoe UI', sans-serif;
    color: #222;
    transition: all 0.3s ease-in-out;
  }

  .note-detail:hover {
    transform: scale(1.01);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
  }

  .note-detail h1 {
    font-size: 2.4rem;
    margin-bottom: 25px;
    color: #1a1a3d;
    text-align: center;
    border-bottom: 2px solid #d3d3d3;
    padding-bottom: 10px;
  }

  .note-detail p {
    margin: 12px 0;
    font-size: 1.1rem;
    line-height: 1.6;
  }

  .note-detail p strong {
    color: #2b2b6b;
  }

  .tag {
    display: inline-block;
    background: #d1f8d7;
    color: #115900;
    padding: 6px 14px;
    margin: 4px;
    border-radius: 50px;
    font-size: 0.85rem;
    font-weight: 500;
    transition: transform 0.2s;
  }

  .tag:hover {
    transform: scale(1.05);
    background-color: #b8ffbd;
  }

  .download-area {
    text-align: center;
    margin-top: 40px;
  }

  .download-btn {
    background: linear-gradient(to right, #2b2b6b, #4e4ea6);
    color: white;
    padding: 14px 32px;
    border-radius: 10px;
    font-size: 1.05rem;
    font-weight: 500;
    text-decoration: none;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    transition: transform 0.3s, box-shadow 0.3s;
  }

  .download-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.25);
    background: linear-gradient(to right, #1f1f4d, #3b3b8a);
  }
</style>

<section class="note-detail">
  <h1 style="margin-top: 0;"><%= note.title %></h1>

  <% 
    const isPdf = note.fileUrl.endsWith(".pdf"); 
    const isImage = /\.(jpg|jpeg|png|gif)$/i.test(note.fileUrl);
  %>

  <div class="preview-area" style="margin-top: 30px;">
    <h2 style="font-size: 1.4rem; margin-bottom: 15px; color: #2b2b6b;">Preview:</h2>

    <% if (isPdf) { %>
      <iframe src="<%= note.fileUrl %>#toolbar=0" width="100%" height="300px" style="border: 1px solid #ccc; border-radius: 8px;"></iframe>
    <% } else if (isImage) { %>
      <img src="<%= note.fileUrl %>" alt="Note Image" style="max-width: 100%; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);" />
    <% } else { %>
      <p style="color: #888;">No preview available for this file type.</p>
    <% } %>
  </div>


  <p><strong>Subject:</strong> <%= note.subject || 'N/A' %></p>
  <p><strong>Course:</strong> <%= note.course || 'N/A' %></p>
  <p><strong>College:</strong> <%= note.college %></p>

  <p><strong>Tags:</strong> 
    <% note.tags.forEach(tag => { %>
      <span class="tag"><%= tag %></span>
    <% }) %>
  </p>

  <p><strong>Description:</strong></p>
  <p><%= note.description || 'No description provided.' %></p>

  <p style="display: flex; align-items: center;"><strong>Uploaded by:</strong> 
    <%= note.uploadedBy?.name || note.uploadedBy?.username || "Unknown" %>
              <% if (note.uploadedBy.moderator_YASH_09) { %>
                <img src="/images/blueCheckmark.svg" alt="Moderator" style="all: unset; width: 23px;">
              <% } else if (note.uploadedBy.liwfijssouhfns) { %>
                <img src="/images/icons8-checkmark.svg" alt="Developer" style="all: unset; width: 23px;">
              <% } else if (note.uploadedBy.verified) { %>
                <span style="color: green; font-size: 0.8rem;">âœ”</span>
              <% } %>
  </p>

  <p><strong>Download Count:</strong> <%= note.downloadCount %></p>

  <p><strong>Uploaded at:</strong> <%= note.uploadedAt.toDateString() %></p>

  <div class="download-area">
    <a class="btn download-btn" href="/notes/<%= note._id %>/download" target="_blank">
      ðŸ“¥ Download Note
    </a>
  </div>
</section>
